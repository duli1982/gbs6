<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Practice Simulation - Beginner Module 3</title>

    <!-- Security: DOMPurify for XSS Protection -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"
        integrity="sha384-4H0KEY16H/RgZTVx9vNEz5PQZbQ/1LDz9Jl8tN0FKYxjBfUOcYhJ3k+xhWLxqUqK"
        crossorigin="anonymous"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../../shared/breadcrumb-nav.css">
    <link rel="stylesheet" href="../../../shared/hub-button.css">
    <link rel="stylesheet" href="../../../shared/styles/quiz.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        .google-sans {
            font-family: 'Google Sans', sans-serif;
        }

        body {
            font-family: 'Roboto', sans-serif;
        }

        .simulation-chat {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            min-height: 400px;
            max-height: 500px;
            overflow-y: auto;
        }

        .user-message {
            background: #3b82f6;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 18px 18px 4px 18px;
            margin: 0.5rem 0;
            max-width: 80%;
            margin-left: auto;
        }

        .ai-message {
            background: #f1f5f9;
            color: #1e293b;
            padding: 0.75rem 1rem;
            border-radius: 18px 18px 18px 4px;
            margin: 0.5rem 0;
            max-width: 80%;
            border: 1px solid #e2e8f0;
        }

        .scenario-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .input-area {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .hint-box {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .feedback-good {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #22c55e;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .feedback-improve {
            background: linear-gradient(135deg, #fef7f0 0%, #fed7aa 100%);
            border: 2px solid #f97316;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .progress-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 50px;
            padding: 0.5rem 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Enhanced Breadcrumb Navigation -->
    <nav class="breadcrumb-container" aria-label="Breadcrumb">
        <div class="breadcrumb-wrapper">
            <div class="breadcrumb-nav">
                <ol>
                    <li class="breadcrumb-item">
                        <a href="../../../index.html" class="breadcrumb-link" aria-label="Go to Home">
                            <span class="breadcrumb-icon icon-home"></span>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="breadcrumb-separator" aria-hidden="true">‚Ä∫</li>
                    <li class="breadcrumb-item">
                        <a href="../../index.html" class="breadcrumb-link" aria-label="Go to RPO Training">
                            <span class="breadcrumb-icon icon-folder"></span>
                            <span>RPO Training</span>
                        </a>
                    </li>
                    <li class="breadcrumb-separator" aria-hidden="true">‚Ä∫</li>
                    <li class="breadcrumb-item">
                        <a href="../beginner.html" class="breadcrumb-link" aria-label="Go to Beginner Path">
                            <span class="breadcrumb-icon icon-book"></span>
                            <span>Beginner Path</span>
                        </a>
                    </li>
                    <li class="breadcrumb-separator" aria-hidden="true">‚Ä∫</li>
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-current" aria-current="page">
                            <span class="breadcrumb-icon icon-file"></span>
                            <span>Interactive AI Practice</span>
                        </span>
                    </li>
                </ol>
            </div>
            <div class="breadcrumb-actions">
                <div class="breadcrumb-progress">
                    <span>Module 3/5</span>
                    <div class="breadcrumb-progress-bar">
                        <div class="breadcrumb-progress-fill" style="width: 60%"></div>
                    </div>
                </div>
                <a href="../../../index.html" class="breadcrumb-hub-btn" aria-label="Return to Hub">
                    <span class="icon-home"></span>
                    <span>Hub</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Progress Indicator -->
    <div class="progress-indicator">
        <div class="text-sm font-semibold text-gray-700">Module 3 of 5</div>
        <div class="text-xs text-gray-500">Interactive Practice</div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">üéØ</div>
            <h1 class="google-sans text-3xl md:text-4xl font-bold text-gray-900 mb-3">Interactive AI Practice</h1>
            <p class="text-lg text-gray-600">Practice your AI conversation skills in a safe environment</p>
        </div>

        <!-- Main Content -->
        <div class="bg-white rounded-xl p-8 shadow-lg mb-8">

            <!-- Current Scenario -->
            <div id="scenario-container">
                <div class="scenario-card">
                    <div class="flex items-start">
                        <div class="text-2xl mr-3">üìß</div>
                        <div>
                            <h3 class="google-sans font-bold text-amber-800 mb-2">Practice Scenario 1: Writing a
                                Follow-up Email</h3>
                            <p class="text-amber-700 mb-3">
                                You interviewed a candidate named Alex Johnson for a Marketing Coordinator position last
                                week. You want to send a follow-up email to let them know they've moved to the next
                                round and schedule a second interview.
                            </p>
                            <div class="text-sm text-amber-600">
                                <strong>Your task:</strong> Write a prompt that will help AI create this follow-up
                                email.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Simulation Chat Area -->
            <div class="simulation-chat" id="chat-area">
                <div class="ai-message">
                    üëã Hi! I'm your AI practice assistant. I'm here to help you practice writing good prompts.
                    <br><br>
                    Look at the scenario above, then type your prompt in the box below. I'll give you feedback and help
                    you improve!
                    <br><br>
                    <em>Remember: Be specific about what you want, who it's for, and what tone to use.</em>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <label for="user-prompt" class="block text-sm font-semibold text-gray-700 mb-2">
                    Type your AI prompt here:
                </label>
                <textarea id="user-prompt" rows="4"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Example: Write an email to Alex Johnson about..."></textarea>
                <div class="flex justify-between items-center mt-3">
                    <button onclick="showHint()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                        üí° Need a hint?
                    </button>
                    <button onclick="submitPrompt()"
                        class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                        Submit Prompt
                    </button>
                </div>
            </div>

            <!-- Hint Box (Hidden by default) -->
            <div id="hint-box" class="hint-box hidden">
                <div class="flex items-start">
                    <div class="text-xl mr-3">üí°</div>
                    <div>
                        <h4 class="font-bold text-blue-800 mb-2">Hint for this scenario:</h4>
                        <p class="text-blue-700 text-sm">
                            Think about: What type of document (email), who it's to (Alex Johnson), what the purpose is
                            (follow-up about moving to next round), what information to include (scheduling second
                            interview), and what tone (professional but encouraging).
                        </p>
                    </div>
                </div>
            </div>

            <!-- Feedback Area -->
            <div id="feedback-area"></div>
        </div>

        <!-- Knowledge Check Quiz -->
        <div id="module-quiz" class="my-12"></div>

        <!-- Navigation -->
        <div class="flex justify-between items-center">
            <a href="../beginner.html" class="text-gray-500 hover:text-gray-700 font-medium">
                ‚Üê Back to Beginner Path
            </a>

            <button id="complete-btn" onclick="completeModule()"
                class="bg-gray-400 text-white px-8 py-3 rounded-lg font-semibold cursor-not-allowed" disabled>
                Complete Practice Session
            </button>
        </div>
    </div>

    <script>
        let currentScenario = 1;
        let practiceCompleted = false;

        const scenarios = [
            {
                icon: "üìß",
                title: "Practice Scenario 1: Writing a Follow-up Email",
                description: "You interviewed a candidate named Alex Johnson for a Marketing Coordinator position last week. You want to send a follow-up email to let them know they've moved to the next round and schedule a second interview.",
                task: "Write a prompt that will help AI create this follow-up email.",
                goodPrompts: [
                    "write an email to alex johnson",
                    "follow-up email",
                    "second interview",
                    "marketing coordinator",
                    "professional tone"
                ],
                hint: "Think about: What type of document (email), who it's to (Alex Johnson), what the purpose is (follow-up about moving to next round), what information to include (scheduling second interview), and what tone (professional but encouraging)."
            },
            {
                icon: "üîç",
                title: "Practice Scenario 2: Creating Interview Questions",
                description: "You need to prepare for interviewing candidates for a Customer Service Representative role. You want questions that will help you assess their communication skills and problem-solving abilities.",
                task: "Write a prompt to generate good interview questions.",
                goodPrompts: [
                    "interview questions",
                    "customer service",
                    "communication skills",
                    "problem-solving",
                    "behavioral questions"
                ],
                hint: "Consider: What type of content (interview questions), for what role (Customer Service Rep), what skills to assess (communication, problem-solving), and what question types (behavioral, situational)."
            }
        ];

        function showHint() {
            const hintBox = document.getElementById('hint-box');
            hintBox.classList.remove('hidden');
        }

        function submitPrompt() {
            const userPrompt = document.getElementById('user-prompt').value.trim();

            if (!userPrompt) {
                alert('Please enter a prompt first!');
                return;
            }

            // Add user message to chat
            addMessageToChat(userPrompt, 'user');

            // Analyze the prompt and provide feedback
            setTimeout(() => {
                const feedback = analyzePrompt(userPrompt, currentScenario - 1);
                addMessageToChat(feedback.message, 'ai');
                showFeedback(feedback);

                // Clear input
                document.getElementById('user-prompt').value = '';

                // If good prompt, enable next scenario or completion
                if (feedback.score >= 3) {
                    if (currentScenario < scenarios.length) {
                        setTimeout(() => {
                            nextScenario();
                        }, 2000);
                    } else {
                        enableCompletion();
                    }
                }
            }, 1000);
        }

        function analyzePrompt(prompt, scenarioIndex) {
            const scenario = scenarios[scenarioIndex];
            const promptLower = prompt.toLowerCase();
            let score = 0;
            let feedback = [];

            // Check for key elements
            scenario.goodPrompts.forEach(element => {
                if (promptLower.includes(element)) {
                    score++;
                }
            });

            // Generate feedback based on score
            if (score >= 4) {
                return {
                    score: score,
                    type: 'excellent',
                    message: `üéâ Excellent prompt! You included all the key elements: specific task, recipient/context, purpose, and tone. Here's what AI might generate for you:\n\n"Subject: Next Steps - Marketing Coordinator Position\n\nDear Alex,\n\nThank you for taking the time to interview with us last week for the Marketing Coordinator position. I'm pleased to inform you that you've been selected to move forward to the next round...\n\nWould you be available for a second interview next week? I have the following times available:\n‚Ä¢ Tuesday at 2:00 PM\n‚Ä¢ Wednesday at 10:00 AM\n‚Ä¢ Friday at 3:00 PM\n\nLooking forward to hearing from you!\n\nBest regards,\n[Your name]"`
                };
            } else if (score >= 2) {
                return {
                    score: score,
                    type: 'good',
                    message: `üëç Good start! Your prompt has some key elements, but could be more specific. Try adding more details about the tone, specific information to include, or the exact purpose.`
                };
            } else {
                return {
                    score: score,
                    type: 'needs-improvement',
                    message: `ü§î Your prompt needs more details. Remember to include: what type of document, who it's for, the specific purpose, and what tone to use. Try being more specific!`
                };
            }
        }

        function addMessageToChat(message, sender) {
            const chatArea = document.getElementById('chat-area');
            const messageDiv = document.createElement('div');
            messageDiv.className = sender === 'user' ? 'user-message' : 'ai-message';
            messageDiv.innerHTML = message.replace(/\n/g, '<br>');
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function showFeedback(feedback) {
            const feedbackArea = document.getElementById('feedback-area');
            const feedbackClass = feedback.type === 'excellent' || feedback.type === 'good' ? 'feedback-good' : 'feedback-improve';

            feedbackArea.innerHTML = `
                <div class="${feedbackClass}">
                    <h4 class="font-bold mb-2">Feedback on your prompt:</h4>
                    <p class="text-sm">${feedback.message}</p>
                </div>
            `;
        }

        function nextScenario() {
            currentScenario++;
            const scenario = scenarios[currentScenario - 1];

            document.getElementById('scenario-container').innerHTML = `
                <div class="scenario-card">
                    <div class="flex items-start">
                        <div class="text-2xl mr-3">${scenario.icon}</div>
                        <div>
                            <h3 class="google-sans font-bold text-amber-800 mb-2">${scenario.title}</h3>
                            <p class="text-amber-700 mb-3">${scenario.description}</p>
                            <div class="text-sm text-amber-600">
                                <strong>Your task:</strong> ${scenario.task}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Update hint
            document.getElementById('hint-box').innerHTML = `
                <div class="flex items-start">
                    <div class="text-xl mr-3">üí°</div>
                    <div>
                        <h4 class="font-bold text-blue-800 mb-2">Hint for this scenario:</h4>
                        <p class="text-blue-700 text-sm">${scenario.hint}</p>
                    </div>
                </div>
            `;
            document.getElementById('hint-box').classList.add('hidden');

            addMessageToChat(`Great job! Let's try scenario ${currentScenario}. Look at the new scenario above and write your prompt.`, 'ai');
        }

        function enableCompletion() {
            practiceCompleted = true;
            const completeBtn = document.getElementById('complete-btn');
            completeBtn.disabled = false;
            completeBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
            completeBtn.classList.add('bg-green-600', 'hover:bg-green-700');

            addMessageToChat(`üéâ Fantastic! You've completed both practice scenarios. You're getting really good at writing AI prompts. Click "Complete Practice Session" when you're ready to move on.`, 'ai');
        }

        function completeModule() {
            if (!practiceCompleted) {
                alert('Please complete the practice scenarios first!');
                return;
            }

            // Mark module as completed
            let completedModules = JSON.parse(localStorage.getItem('beginner-path-progress') || '[]');
            if (!completedModules.includes(3)) {
                completedModules.push(3);
                localStorage.setItem('beginner-path-progress', JSON.stringify(completedModules));
            }

            showCompletionModal();
        }

        // Modal Functions
        function showCompletionModal() {
            const modal = document.getElementById('completionModal');
            modal.classList.add('active');
        }

        function closeModal() {
            const modal = document.getElementById('completionModal');
            modal.classList.remove('active');
        }

        function continueToNextModule() {
            closeModal();
            setTimeout(() => {
                window.location.href = '../beginner.html';
            }, 300);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('modal-overlay')) {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>

    <!-- Modal Styles -->
    <style>
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
            position: relative;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 2.5rem;
            animation: bounce 0.6s ease-out;
        }

        @keyframes bounce {

            0%,
            20%,
            53%,
            80%,
            100% {
                transform: translate3d(0, 0, 0);
            }

            40%,
            43% {
                transform: translate3d(0, -15px, 0);
            }

            70% {
                transform: translate3d(0, -7px, 0);
            }

            90% {
                transform: translate3d(0, -2px, 0);
            }
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .modal-subtitle {
            color: #6b7280;
            margin-bottom: 1.5rem;
        }

        .modal-body {
            text-align: center;
            margin-bottom: 2rem;
        }

        .modal-message {
            font-size: 1.1rem;
            color: #374151;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .modal-next-step {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            margin-bottom: 1rem;
            border: none;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .modal-btn {
            padding: 0.75rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
        }

        .modal-btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .modal-btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #e5e7eb;
        }

        .modal-btn-secondary:hover {
            background: #e5e7eb;
        }
    </style>

    <!-- Completion Modal -->
    <div id="completionModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">üéØ</div>
                <h2 class="modal-title google-sans">Practice Session Completed!</h2>
                <p class="modal-subtitle">Hands-on experience gained</p>
            </div>

            <div class="modal-body">
                <p class="modal-message">
                    You now have hands-on experience with AI prompting and real-world practice scenarios.
                </p>

                <div class="modal-next-step">
                    <strong>üöÄ Next Up:</strong> Module 4 - Apply AI to your daily work tasks
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                    <div class="text-blue-800 font-semibold text-sm mb-1">‚ú® What You've Practiced:</div>
                    <ul class="text-blue-700 text-sm space-y-1 text-left">
                        <li>‚Ä¢ Real AI conversation scenarios</li>
                        <li>‚Ä¢ Prompt refinement techniques</li>
                        <li>‚Ä¢ Problem-solving with AI</li>
                        <li>‚Ä¢ Practical application skills</li>
                    </ul>
                </div>
            </div>

            <div class="modal-actions">
                <button onclick="continueToNextModule()" class="modal-btn modal-btn-primary">
                    Continue to Module 4 ‚Üí
                </button>
                <button onclick="closeModal()" class="modal-btn modal-btn-secondary">
                    Practice More
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Breadcrumb Navigation Script -->
    <script src="../../../shared/scripts/breadcrumb-nav.js"></script>

    <!-- Security Utilities -->
    <script src="../../../shared/scripts/utils/security.js"></script>

    <!-- Quiz Component -->
    <script src="../../../shared/scripts/components/quiz.js"></script>

    <!-- Module 3 Quiz Initialization -->
    <script>
        // Global quiz variable so onclick handlers can access it
        let quiz;
        let quizCompleted = false;

        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            const quizData = {
                moduleId: 'beginner-3',
                passingScore: 70,
                showReview: true,
                questions: [
                    {
                        question: "What is the most important element to include when writing an AI prompt?",
                        options: [
                            "Politeness and formal greetings",
                            "Being specific about what you want",
                            "Using complex technical language",
                            "Making the prompt as long as possible"
                        ],
                        correctAnswer: 1,
                        explanation: "Being specific about what you want is the most important element. AI works best when you clearly state your needs, requirements, and desired outcomes.",
                        hint: "Think about what the practice scenarios emphasized most."
                    },
                    {
                        question: "When asking AI to write an email, which information should you include in your prompt?",
                        options: [
                            "Only the recipient's name",
                            "Just the general topic",
                            "The recipient, purpose, key information, and desired tone",
                            "The email should write itself"
                        ],
                        correctAnswer: 2,
                        explanation: "A complete email prompt should include who it's for (recipient), why you're writing (purpose), what information to include, and what tone to use (professional, casual, friendly, etc.).",
                        hint: "Review the follow-up email scenario practice."
                    },
                    {
                        question: "If AI's first response isn't quite what you need, what should you do?",
                        options: [
                            "Give up and start completely over",
                            "Refine your prompt with more specific details",
                            "Accept it as is - you can't improve it",
                            "Switch to a completely different AI tool"
                        ],
                        correctAnswer: 1,
                        explanation: "If the first response isn't perfect, refine your prompt by adding more specific details, context, or examples. AI conversations are iterative - you can guide it to better results.",
                        hint: "Remember: AI practice is about iteration and refinement."
                    },
                    {
                        question: "What should you include when asking AI to create interview questions?",
                        options: [
                            "Just say 'give me interview questions'",
                            "The job role, skills to assess, and question types needed",
                            "Only the company name",
                            "Generic questions work for all roles"
                        ],
                        correctAnswer: 1,
                        explanation: "Good interview question prompts should specify the role (Customer Service Rep), what skills to assess (communication, problem-solving), and what types of questions you need (behavioral, situational, technical).",
                        hint: "Think about scenario 2 in the practice session."
                    },
                    {
                        question: "Why is providing context important when working with AI?",
                        options: [
                            "It's not important - AI knows everything",
                            "It makes your prompt look more professional",
                            "Context helps AI understand your specific needs and give relevant responses",
                            "Context is only needed for technical questions"
                        ],
                        correctAnswer: 2,
                        explanation: "Providing context (your role, the audience, the situation, constraints) helps AI understand your specific needs and tailor responses accordingly. Without context, AI has to guess your intent.",
                        hint: "Consider why the practice scenarios included detailed background information."
                    }
                ],
                onComplete: function(percentage, timeTaken) {
                    if (percentage >= 70) {
                        quizCompleted = true;
                        checkCompletionRequirements();
                    }
                }
            };

            // Initialize the quiz
            quiz = new QuizComponent('module-quiz', quizData);
        });

        // Update the enableCompletion function to check quiz status
        function checkCompletionRequirements() {
            if (practiceCompleted && quizCompleted) {
                const completeBtn = document.getElementById('complete-btn');
                completeBtn.disabled = false;
                completeBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
                completeBtn.classList.add('bg-green-600', 'hover:bg-green-700');

                // Scroll to button smoothly
                setTimeout(() => {
                    completeBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 500);
            }
        }

        // Override the original enableCompletion to integrate with quiz
        const originalEnableCompletion = enableCompletion;
        enableCompletion = function() {
            practiceCompleted = true;
            checkCompletionRequirements();

            if (!quizCompleted) {
                addMessageToChat(`üéâ Great job completing the practice scenarios! Now please complete the Knowledge Check Quiz below to finish this module.`, 'ai');

                // Scroll to quiz
                setTimeout(() => {
                    document.getElementById('module-quiz').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 1000);
            }
        };
    </script>
</body>

</html>