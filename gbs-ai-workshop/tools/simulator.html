<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tools — Scenario Simulator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../../shared/fonts.css">
  <link rel="stylesheet" href="../../shared/buttons.css">
  <link rel="stylesheet" href="../../shared/card-animations.css">
</head>
<body class="antialiased">
  <div data-include="../../shared/partials/header.html"></div>
  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <h1 class="text-3xl md:text-4xl font-bold tracking-tight mb-4">Scenario Simulator</h1>
    <p class="max-w-3xl text-lg text-gray-600 mb-6">Test your prompt‑crafting skills with real‑world scenarios. Choose the best prompt and then use AI to explain the rationale and improvements.</p>

    <div id="sim-cases" class="max-w-3xl space-y-6">
      <div class="bg-white border rounded-xl p-5">
        <h3 class="font-semibold text-gray-900">1) Rewrite a cold outreach email for a data analyst role</h3>
        <ol class="list-decimal list-inside mt-2 text-gray-700 space-y-1">
          <li><label><input type="radio" name="q1" value="A" class="mr-2"/>"Write an email."</label></li>
          <li><label><input type="radio" name="q1" value="B" class="mr-2"/>"Act as a technical recruiter. Rewrite the email to be concise, specific to a data analyst role in fintech, and include one tailored hook from their GitHub profile. Keep under 120 words. Output: Subject line + body."</label></li>
          <li><label><input type="radio" name="q1" value="C" class="mr-2"/>"Make it better and shorter."</label></li>
        </ol>
        <div class="mt-3 flex gap-2">
          <button class="px-3 py-2 bg-gray-800 text-white rounded" onclick="check('q1','B')">Check Answer</button>
          <button class="px-3 py-2 bg-[#4A90E2] text-white rounded" onclick="explain('Rewrite a cold outreach email for a data analyst role', 'B')">Ask Gemini for rationale</button>
        </div>
        <div id="q1-result" class="mt-2 text-sm"></div>
      </div>

      <div class="bg-white border rounded-xl p-5">
        <h3 class="font-semibold text-gray-900">2) Extract must‑have vs nice‑to‑have from a JD</h3>
        <ol class="list-decimal list-inside mt-2 text-gray-700 space-y-1">
          <li><label><input type="radio" name="q2" value="A" class="mr-2"/>"Summarize this."</label></li>
          <li><label><input type="radio" name="q2" value="B" class="mr-2"/>"Act as a recruiting analyst. From the JD, extract a bullet list under two headings: Must‑Have vs Nice‑to‑Have. Include years, tools, and certifications when specified. Output: two lists in Markdown."</label></li>
          <li><label><input type="radio" name="q2" value="C" class="mr-2"/>"Give me key points."</label></li>
        </ol>
        <div class="mt-3 flex gap-2">
          <button class="px-3 py-2 bg-gray-800 text-white rounded" onclick="check('q2','B')">Check Answer</button>
          <button class="px-3 py-2 bg-[#4A90E2] text-white rounded" onclick="explain('Extract must-have vs nice-to-have from a JD', 'B')">Ask Gemini for rationale</button>
        </div>
        <div id="q2-result" class="mt-2 text-sm"></div>
      </div>
    </div>

    <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded">
      <h4 class="font-semibold text-blue-900 mb-1">Suggestions</h4>
      <ul class="list-disc list-inside text-blue-900/90 space-y-1">
        <li>After checking, use Prompt Builder to refine the winning prompt.</li>
        <li>Use Reverse Prompt on a strong output to learn structure and constraints.</li>
      </ul>
      <div class="mt-2 flex gap-2">
        <a href="../tools/builder.html" class="px-3 py-2 bg-[#4A90E2] text-white rounded">Open Prompt Builder</a>
        <a href="../tools/reverse-prompt.html" class="px-3 py-2 bg-gray-800 text-white rounded">Open Reverse Prompt</a>
      </div>
    </div>
  </main>
  <div data-include="../../shared/partials/footer.html"></div>
  <script src="../../shared/scripts/include.js"></script>
  <script>
    function check(q, correct) {
      const sel = document.querySelector(`input[name="${q}"]:checked`);
      const el = document.getElementById(`${q}-result`);
      if (!sel) { el.textContent = 'Select an option first.'; el.className='mt-2 text-sm text-gray-600'; return; }
      if (sel.value === correct) { el.textContent = 'Correct — it adds role, constraints, output format.'; el.className='mt-2 text-sm text-green-700'; }
      else { el.textContent = 'Try again — look for role, specificity, and format.'; el.className='mt-2 text-sm text-red-700'; }
    }
    async function explain(title, correct) {
      const text = `Scenario: ${title}\nChosen option: ${correct}. Explain why this option is superior and give two optimization tips.`;
      const resBox = document.getElementById('sim-cases');
      const expl = document.createElement('div');
      expl.className = 'mt-3 p-3 border rounded text-sm';
      expl.textContent = 'Asking Gemini for a brief rationale...';
      resBox.appendChild(expl);
      try {
        const resp = await fetch('/api/reverse-prompt', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ text }) });
        const data = await resp.json();
        if (resp.ok) {
          expl.textContent = data.reasoning || 'No rationale returned.';
        } else {
          expl.textContent = 'API error: ' + (data.error || resp.status);
        }
      } catch(e) {
        expl.textContent = 'Failed to reach AI service.';
      }
    }
  </script>
</body>
</html>
